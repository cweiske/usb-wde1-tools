 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
	phpwcms | free open source content management system
	created by Oliver Georgi (oliver at phpwcms dot de) and licensed under GNU/GPL.
	phpwcms is copyright 2003-2007 of Oliver Georgi. Extensions are copyright of
	their respective owners. Visit project page for details: http://www.phpwcms.org/
//-->
<title>Formatbeschreibung</title>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="content-style-type" content="text/css" />
  <script src="template/inc_js/frontend.js" type="text/javascript"></script>
  <style type="text/css">
  <!-- 
    @import url("template/inc_css/frontend.css");
  //-->
  </style>
<!-- Standard Meta-Tags -->
  <meta name="author" content="AAAAAAAAAA" />
  <meta name="publisher" content="PPPPPPPPPP" />
  <meta name="copyright" content="CCCCCCCCCC" />
  <meta name="country" content="Deutschland" />
  <meta name="language" content="de" />
  <meta name="coverage" content="worldwide" />
  <meta name="robots" content="index, follow" />
  <meta name="revisit-after" content="14 days" />
  <meta name="pragma" content="no-cache" />

<!-- Hintergrundfarbe / background-color -->
  <style type="text/css">
  <!-- 
  body { background:#F9F9F9; padding:0px 0 10px 0; margin:0;}
  //-->
  </style>

<!-- Ueberblendung der Seiten (Funktion nur fuer IE ) -->
  <meta http-equiv="Page-Enter" content="progid:DXImageTransform.Microsoft.Fade(Duration=0.2)" />
  <meta http-equiv="Page-Exit" content="progid:DXImageTransform.Microsoft.Fade(Duration=0.2)" />
  <!--[if lt IE 7]>
  <style type="text/css">
    body { behavior: url("template/inc_css/specific/csshover2.htc"); }
    img { behavior: url("template/inc_css/specific/pngbehavior.htc"); }
  </style>
  <![endif]-->
</head>
<body id="myid_148">
<!-- ===================================================== -->
<div id="container-MASTER-XL">
<div id="container-BLATT-XL">

<!-- ===================================================== -->
<div id="container-OBEN">
<div class="header-BILD">
<a href="http://www.logview.info/cms/index.php?index" target="_top" title="Home">
<img src="templates/startbild2.jpg" border="0" alt="Home" /></a></div>
</div><!-- Ende container-OBEN -->

<!-- ===================================================== -->
<div>
<table width="100%">
<tr>
 <td align="left">&nbsp;&nbsp;
                  <a href="http://www.logview.info/cms/d_logview_info.phtml">LogView</a>  	&nbsp;&nbsp;
                  <!--a href="http://www.logview.info/cms/d_projekte.phtml">Projekte</a--> 	&nbsp;&nbsp;
                  <a href="http://www.logview.info/cms/d_download.phtml">Downloads</a>	&nbsp;&nbsp;
                  <a href="http://www.logview.info/cms/d_doku.phtml">Doku</a>		&nbsp;&nbsp;
                  <a href="http://www.logview.info/cms/d_bluetooth.phtml">Artikel</a>		&nbsp;&nbsp;
                  <a target="_blank" href="http://www.logview.info/vBulletin">Forum</a>		&nbsp;&nbsp;</td>
 <td width="*"> </td>
 <td align="right">
   <a href="http://www.logview.info/cms/leer.phtml"><img src="templates/bt_druck.gif" width="20" height="14" border="0" alt=""></a> &nbsp;
   <a href="http://www.logview.info/cms/d_kontakt.phtml"><img src="templates/bt_kontakt.gif" width="20" height="14" border="0" alt=""></a> &nbsp;
   <a href="http://www.logview.info/cms/d_gaestebuch.phtml"><img src="templates/bt_guestbook.gif" width="20" height="14" border="0" alt=""></a> &nbsp;
   <a href="http://www.logview.info/cms/d_sitemap.phtml"><img src="templates/bt_sitemap.gif" width="20" height="14" border="0" alt=""></a> &nbsp;
   <a href="http://www.logview.info/cms/d_impressum-2.phtml"><img src="templates/bt_impressum.gif" width="20" height="14" border="0" alt=""></a> &nbsp; &nbsp;
   <a href="http://www.logview.info/cms/deutsch.phtml"><img src="templates/de.gif" width="20" height="14" border="0" alt="Deutsch"></a>  &nbsp;
   <a href="http://www.logview.info/cms/e_logview_info.phtml"><img src="templates/en.gif" width="20" height="14" border="0" alt="English"></a>

 </td>


</tr>
</table>
</div>

<!-- ===================================================== -->
<div id="container-MITTE">
<table class="Tabelle-MITTE" cellspacing="0" cellpadding="0" border="0">
<tbody>
<tr>

<!-- ====================================== -->
<td class="TabellenSpalte-links">

<!--div class="logo-BOX">
<<img src="picture/../templates/free_XL/logo/logo.gif" border="0" alt="" />></div-->
 <br />
<div class="navigation-BOX">
<div class="pepes_navList"><div class="MenueEbene_2"><a href="d_logview_info.phtml" title="LogView">LogView</a></div>
<div class="MenueEbene_2"><a href="d_geraeteliste.phtml" title="Geräteliste">Geräteliste</a></div>
<div class="MenueEbene_2"><a href="d_openformat_testformat.phtml" title="Openformat">Openformat</a></div>
<div class="MenueEbene_3" id="aktiveEbene_3"><a href="d_formatbeschreibung.phtml" title="Formatbeschreibung">Formatbeschreibung</a></div>
<div class="MenueEbene_3"><a href="d_beispiel-ini.phtml" title="Beispiel INI">Beispiel INI</a></div>
<div class="MenueEbene_3"><a href="d_openformat_tips-und-tricks.phtml" title="Tips und Tricks">Tips und Tricks</a></div>
<div class="MenueEbene_3"><a href="d_openformat-editor.phtml" title="Openformat Editor">Openformat Editor</a></div>
<div class="MenueEbene_3"><a href="d_openformat_debug.phtml" title="OpenFormat Debug I">OpenFormat Debug I</a></div>
<div class="MenueEbene_3"><a href="d_openformat-debug-ii.phtml" title="OpenFormat Debug II">OpenFormat Debug II</a></div>
<div class="MenueEbene_3"><a href="d_beipiel--miniwetterstation.phtml" title="Beipiel . Miniwetterstation">Beipiel . Miniwetterstation</a></div>
<div class="MenueEbene_2"><a href="d_testformate.phtml" title="Testformate">Testformate</a></div>
<div class="MenueEbene_2"><a href="d_donationware-1.phtml" title="Donationware">Donationware</a></div>
<div class="MenueEbene_2"><a href="d_danksagung.phtml" title="Danksagung">Danksagung</a></div>
<div class="MenueEbene_2"><a href="d_medien.phtml" title="Medien">Medien</a></div>
<div class="MenueEbene_2"><a href="Videos.phtml" title="Videos">Videos</a></div>
</div>
</div>

<div class="content-BOX-links"></div>
<div class="left-SPACER"> </div>
</td><!-- Ende TabellenSpalte-links -->

<!-- ====================================== -->
<td class="TabellenSpalte-mitte">

<table width="100%">
<tr>
 <td align="left" width="*"> <div class="breadcrumb-BOX-XL"><a href=".0.0.1.0.0.phtml"></a> <span class="breadcrumb_spacer">&gt;</span> <a href="15.0.0.1.0.0.phtml"></a> <span class="breadcrumb_spacer">&gt;</span> <a href="d_openformat_testformat.phtml">Openformat</a> <span class="breadcrumb_spacer">&gt;</span> Formatbeschreibung</div> </td>
 <td align="right" width="200">
   <form action="index.php?Suche" method="post">
     <input type="text" name="search_input_field" size="20" maxlength="250" value="" style="font: normal 11px/11px sans-serif; border: solid 1px #C0C0C0; background: #FFFFFF; padding: 2px; color: #000000;">
     <input type="submit" value="Suchen" style="font-size:10px;">
   </form>
 </td>
</tr>
</table>

   <!-- StartDruck -->
<div class="content-BOX-XL"><a name="jump106"></a><div style="margin-bottom:20px;">

   
   

   

</div><h3>1. Format Overview</h3><div class="articleText"><p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left">The OpenFormat is designed to enable developers to inferface their own hardware with LogView via a configurable serial data protocol. To use the OpenFormat (short name:&nbsp;OF) you have to create an INI file and an optional picture for your device. The INI file contains all the needed configuration information for LogView to display your serial data.</p>
<p align="left">&nbsp;</p>
<p align="left">The format OF is pure ASCII data where the items are separated by &quot;<b>;</b>&quot;.</p>
<p align="left">An OF packet starts with &quot;<b>$</b>&quot;, then has several values separated&nbsp;by &quot;<b>;&quot;</b> and always ends up with <b>CR + LF</b> (#13#10). An example of a packet your device may produce is:</p>
<p align="left">&nbsp;</p>
<p align="left">$1;1;0;1133;318;0;0;0;0;0;20;21;0;16&lt;cr&gt;&lt;lf&gt;</p>
<p align="left">&nbsp;</p>
<p>We will explain what you can make all the values do in a bit.</p></div><div style="margin:30px 0 0 0;padding:0;" class="spaceBeforeCP"></div><h3>2. - - - Device Settings - - -</h3><div class="articleText"><p>Name - The name of your device<br />
Vendor - Your (company) name<br />
Vendor Link - Company link [optional]<br />
LogView Link - If we have a special info on our website [optional]<br />
<br />
TimeStep - Time difference between two packets within one channel. This is a global setting for all channels.<br />
Time given from device - If set, the time must be included in the packet and will be used by LogView. If not set, the time is calculated from TimeStep and counting your packets.<br />
We will go into more detail later, see <b>chapter 4c</b>.<b><br />
<br />
</b>Value format - At the moment LogView only supports ASCII format.<br />
Checksum - If you can&nbsp;make your device generate a checksum, LogView can check it. Again more detail later, see <b>chapter 4e<br />
</b>none - Checksum isn't used. Checksum = 0 !<br />
xor - Your device must use the XOR method for checksum calculations.</p></div><div style="margin:30px 0 0 0;padding:0;" class="spaceBeforeCP"></div><h3>3. - - - Port Settings - - -</h3><div class="articleText"><p>
<p>&nbsp;</p>
</p>
<p align="left">Baudrate - Device baud rate&nbsp;<br />
Databits - Device data bits (7 / 8 / 9)<br />
Stopbits - Device stop bits (1 / 1,5 / 2)<br />
Flowcontrol - Flowcontrol (None / Xon,Xoff / Hardware)<br />
State DTR - Controls the state of the DTR line&nbsp;<br />
State RTS - Controls the state of the RTS line&nbsp;<br />
Clustersize - Defines the size of the packet in Bytes.&nbsp;<br />
Don&acute;t change this value if you don&acute;t know the exact value.<br />
Negative values tell LogView that the size is variable.&nbsp;<br />
<br />
DelayTime - These values control the receiving and sending of serial data and are related to the used baudrate.<br />
Increase the values for RTOCharDelay if you have problems receiving your data correctly.&nbsp;<br />
Useable values for xxxCharDelay are 200-2000.&nbsp;<br />
WTOxxxx controls the timeouts for sending. Normally you don&acute;t have to change this.</p></div><div style="margin:30px 0 0 0;padding:0;" class="spaceBeforeCP"></div><h3>4. Packet parts</h3><div class="articleText"><p><font size="2">An average packet may look like the one shown below. Have a quick look as in the next few chapters we will explain it in detail.</font></p>
<p align="left"><span style="font-family: Courier New">$1;1;0;1133;318;0;0;0;0;0;20;21;0;16&lt;cr&gt;&lt;lf&gt;<br />
....................................-------- &gt; End Sign #13#10<br />
..................................-- &gt; Checksum (see chapter 4e)<br />
.......-------------------------- &gt; Data Stream (see chapter 4d)<br />
.....- &gt; Time Stamp (see chapter 4c)<br />
...- &gt; States (see chapter 4b)<br />
.- &gt; Channel Number (see chapter 4a)<br />
- &gt; Start Sign &quot;$&quot;</span></p></div><div style="margin:15px 0 0 0;padding:0;" class="spaceBeforeCP"></div><h3>4a. Channel Number</h3><div class="articleText"><p><font size="2">
<p align="left">The OF can handle up to 8 separated channels with 40 data streams each. We class data streams as the values you want to display, such as voltage, current, etc. Channels are something most devices don't make use of. To explain say for instance you built a changer that can independantly change 3 batteries at once but you still only wanted one serial connection to your PC. Logview can cope with all of them at once by using channels and assigning each individual charger to a seperate channel.</p>
<p align="left">&nbsp;</p>
<p align="left">In our example from chapter 1. the <b>bold</b> entry is the <b>channel number.</b>
<p align="left">&nbsp;</p>
<p>$<b>1</b>;1;0;1133;318;0;0;0;0;0;20;21;0;16&lt;cr&gt;&lt;lf&gt;</p>
</p>
</font></p></div><div style="margin:15px 0 0 0;padding:0;" class="spaceBeforeCP"></div><h3>4b. States</h3><div class="articleText"><p><font face="Courier New" size="2">
<p align="left"><span style="font-family: Courier New">[Stati]<br />
StatiAnzahl = 1<br />
<br />
001 = Flight logging</span></p>
</font><font size="2">
<p align="left">&nbsp;</p>
<p>So in state 1 Logview will name the data set &quot;Flight logging&quot;.</p>
</font>
<p>&nbsp;</p>
</p>
<p align="left">You have to define at least one state within your INI file. The states are used in LogView to build useful dataset names.</p>
<p align="left">Some example state names might be : charging, discharging, balancing, Charging in Lipo Mode, ... etc.</p>
<p align="left">&nbsp;</p>
<p align="left">States are only labels which can contain any ASCII character.</p>
<p align="left">&nbsp;</p>
<p align="left">Again in our example the <b>bold</b> entry is the <b>state.</b></p>
<p align="left">&nbsp;</p>
<p align="left">$1;<b>1</b>;0;1133;318;0;0;0;0;0;20;21;0;16&lt;cr&gt;&lt;lf&gt;</p>
<p align="left">&nbsp;</p>
<p align="left">And in the INI file</p>
<p align="left">&nbsp;</p>
</div><div style="margin:15px 0 0 0;padding:0;" class="spaceBeforeCP"></div><h3>4c. Time Stamp</h3><div class="articleText"><p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left"><span style="font-family: Courier New">$1;1</span><b><font face="Courier New" color="#ff0000" size="2">;;</font><font face="Courier New" size="2">1133;318;0;0;0;0;0;20;21;0;16&lt;cr&gt;&lt;lf&gt;<br />
....<b>^^</b></font></b></p>
<p>&nbsp;</p>
<p align="left">The Timestamp (if given by your device) should be given in seconds. You can use fractions, for instance 200ms = 0.2</p>
<p align="left">&nbsp;</p>
<p align="left">Always start at 0 !</p>
<p align="left">&nbsp;</p>
<p align="left">Again in our example the <b>bold</b> entry is the<b> timestamp.</b></p>
<p align="left">&nbsp;</p>
<p align="left">$1;1;<b>0</b>;1133;318;0;0;0;0;0;20;21;0;16&lt;cr&gt;&lt;lf&gt;</p>
<p align="left">&nbsp;</p>
<p align="left">If you don't want your device to give a timestamp you have to set <b>&quot;Time given from device&quot;</b> in <b>&quot;- - - Device Settings - - -&quot;</b> to <b>off</b>, then logview will use the<b> &quot;TimeStep&quot;</b> value in <b>&quot;- - - Device Settings - - -</b>&quot; multiplied by the packet count to work out the passage of time.</p>
<p align="left">&nbsp;</p>
<p align="left">If no timestamp is sent you have to send ;; !</p>
<p>&nbsp;</p>
<p align="left">&nbsp;</p></div><div style="margin:15px 0 0 0;padding:0;" class="spaceBeforeCP"></div><h3>4d. Data Stream</h3><div class="articleText"><p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left">You have to let LogView know how to interpret each of the data&nbsp;items which are part of your packet. To explain this let's use the example from above:</p>
<p align="left">&nbsp;</p>
<p align="left">$1;1;0;<b>1133</b>;<b>318</b>;<b>0</b>;<b>0</b>;<b>0</b>;<b>0</b>;<b>0</b>;<b>20</b>;<b>21</b>;<b>0</b>;16&lt;cr&gt;&lt;lf&gt;</p>
<p align="left">&nbsp;</p>
<p align="left">The items in <b>bold</b> are the <b>data items</b>, this example has 10 seperate data items.</p>
<p align="left">&nbsp;</p>
<p align="left">Each of the data items must be specified in the INI file. These are the settings used:</p>
<p align="left">&nbsp;</p>
<p align="left">Name (Messgr&ouml;&szlig;e) - name of the value (for example <b>Voltage</b>)<br />
Unit (Einheit) - unit (<b>U</b> for voltage)<br />
Symbol - symbol (<b>V</b> for voltage)<br />
Factor (Faktor) - floating value for the value calculation (see explanation) - default : 1,0<br />
Pre Factor Offset (OffsetWert) - floating value for the value calculation (see explanation) - default : 0,0<br />
Post Factor Offset (OffsetSumme) - floating value for the value calculation (see explanation) - default : 0,0</p>
<p align="left">&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left">If you want LogView to display the values from your device verbatim you don&acute;t have to change the last 3 settings.</p>
<p align="left">&nbsp;</p>
<p align="left">If you want to add an offset or a scaling factor to the sent value you can specify it with &quot;Factor&quot;, &quot;Pre Factor Offset&quot; and &quot;Post Factor Offset&quot;.</p>
<p align="left">LogView calculates the&nbsp;resulting value with this formula:</p>
<p align="left">&nbsp;</p>
<p><b>y =&nbsp; ( x&nbsp; +&nbsp; [Pre Factor Offset] )&nbsp; * &nbsp;[Factor]&nbsp;&nbsp; + &nbsp; [Post Factor Offset]</b></p>
<p>&nbsp;</p>
<p>y:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;displayed value</p>
<p>x:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input value, sent in data packet</p>
<p align="left">Pre Factor Offset: &nbsp; OffsetWert</p>
<p align="left">Factor: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Faktor</p>
<p align="left">Post Factor Offset: OffsetSumme&nbsp;</p>
<p align="left">&nbsp;</p></div><div style="margin:15px 0 0 0;padding:0;" class="spaceBeforeCP"></div><h3>4e. Checksum</h3><div class="articleText"><p>&nbsp;<b>Example code for XOR Calculation (Pascal / Delphi Code !!):<br />
<br />
</b><span style="font-family: Courier New"><font size="2">CheckCalc := 0;<br />
Data := '$1;1;0;1133;318;0;0;0;0;0;20;21;0;' // see Example above !<br />
For _i := 1 to Length(Data) do begin<br />
&nbsp; CheckCalc := CheckCalc XOR Byte(Data[_i]);<br />
end;<br />
<br />
</font></span>This means LogView takes the data bytes until the last &quot;;&quot; for the checksum calculation.<br />
<br />
<b><span style="color: #0000ff">$1;1;0;1133;318;0;0;0;0;0;20;21;0;</span></b><span style="color: #339966">16</span><span style="color: #000000"><font size="2">&lt;cr&gt;&lt;lf&gt;&nbsp;<br />
</font></span><span style="color: #0000ff">Data used for the checksum calculation</span></p>
<p>&nbsp;</p>
<p align="left"><span style="font-family: Courier New"><font size="2"><br />
</font></span><span id="1205319159744S" style="display: none">&nbsp;</span><span id="1205319162695S" style="display: none">&nbsp;</span></p></div>
<div class="content-SPACER2"></div>
</div>
<div class="revision-BOX-XL">
<div class="revision">
Aktualisierung: 2008/10/22 - Dominik Schmidt</div>
</div>
   <!-- StopDruck -->

<div class="TopBackDruck-BOX-XL"><!-- Hilfsnavigation UNTEN -->
<a href="#top" title="top">
<img src="templates/free_XL/icons/top_link_.gif" border="0" alt="zum Seitenanfang" /></a> |
<a href="javascript:history.back();" target="_top" title="zurueck">
<img src="templates/free_XL/icons/back_link_.gif" border="0" alt="eine Seite zurück" /></a></div>

</td><!-- Ende TabellenSpalte-mitte -->

</tr>
</tbody>
</table>
</div><!-- Ende container-MITTE -->

</div><!-- Ende container-BLATT-XL -->

<!-- ===================================================== -->
<div id="container-UNTEN-XL">

<!--div class="pepes-footer">
<a href="http://www.logview.info/cms/index.php?index">Home</a> ||
<a href="http://www.logview.info/cms/index.php?sitemap">Sitemap</a> |
<a href="http://www.logview.info/cms/index.php?suche">Suche</a> |
<a href="http://www.logview.info/cms/index.php?impressum">Impressum</a> |
<a href="http://www.logview.info/cms/index.php?rechtliches">Rechtliches</a> |
<a href="http://www.logview.info/cms/index.php?kontakt">Kontakt</a> |
<a href="http://www.logview.info/cms/index.php?gaestebuch">Gästebuch</a> ||
<a href="index.php?d_formatbeschreibung&amp;print=1" target="_blank">Ausdruck</a>
</div-->

<div class="pepes-footer-copyright">
contents of this webpage <a href="http://www.logview.info/cms/login.php" target="_blank">©</a>
 2007 by D. Schmidt - all rights reserved | template powered by
<!-- Dieser Vermerk - einschliesslich Link - darf NICHT entfernt werden //-->
<a href="http://phpwcms-templates.de" target="_blank">phpWCMS-templates.de</a>
<!-- This comment - including the link - must not be removed //-->
</div>

</div><!-- Ende container-UNTEN-XL -->
</div><!-- Ende container-MASTER-XL -->

<!-- Schatten unten -->
<!-- In der "frontend.css" zusaetzliche Klassen freigeben! -->
<!-- --><div id="footer-shadow-XL"></div>
</body>
</html>